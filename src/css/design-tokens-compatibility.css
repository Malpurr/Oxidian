/* ===== DESIGN TOKENS COMPATIBILITY LAYER ===== */
/* Maps old style.css variables to new design-tokens.css system */
/* This enables gradual migration without breaking existing components */

:root {
  /* ===== SEMANTIC COLOR MAPPINGS ===== */
  /* Map old color names to new design token system */
  
  /* Background mappings */
  --bg-ribbon: var(--neutral-900);
  --bg-sidebar: var(--bg-secondary);
  --bg-primary: var(--bg-primary);
  --bg-secondary: var(--bg-secondary);
  --bg-tertiary: var(--bg-tertiary);
  --bg-surface: var(--neutral-700);
  --bg-hover: var(--bg-hover);
  --bg-active: var(--bg-active);
  --bg-tab: var(--bg-primary);
  --bg-tab-active: var(--neutral-800);
  --bg-modal: var(--bg-secondary);
  --bg-input: var(--neutral-700);
  --bg-button: var(--neutral-700);
  --bg-button-hover: var(--bg-hover);
  --bg-selection: oklch(from var(--primary-500) l c h / 0.15);
  --bg-code: var(--neutral-950);
  --bg-inline-code: var(--neutral-800);

  /* Text color mappings */
  --text-accent: var(--primary-500);
  --text-accent-hover: var(--primary-400);
  --text-green: var(--success-500);
  --text-yellow: var(--warning-500);
  --text-red: var(--error-500);
  --text-purple: var(--primary-400);
  --text-teal: hsl(174, 69%, 60%);
  --text-pink: hsl(316, 85%, 75%);
  --text-blue: hsl(217, 91%, 75%);
  --text-orange: hsl(25, 95%, 75%);
  --text-link: var(--primary-400);
  --text-link-hover: var(--primary-300);
  --text-inverse: var(--neutral-950);

  /* Border color mappings */
  --border-focus: var(--primary-500);

  /* Scrollbar color mappings */
  --scrollbar-track: transparent;
  --scrollbar-thumb: var(--neutral-600);
  --scrollbar-thumb-hover: var(--neutral-500);

  /* Shadow mappings */
  --shadow-color: rgba(0, 0, 0, 0.4);
  --shadow-glow: var(--shadow-glow);

  /* ===== TYPOGRAPHY MAPPINGS ===== */
  /* Map old font variables to new design tokens */
  --font-editor: var(--font-mono);
  --font-size-editor: var(--font-size-base);
  --line-height-editor: var(--line-height-normal);
  --line-height-ui: var(--line-height-normal);

  /* Legacy text size mappings */
  --text-xl: var(--font-size-2xl);
  --text-lg: var(--font-size-xl);
  --text-base: var(--font-size-base);
  --text-sm: var(--font-size-sm);
  --text-xs: var(--font-size-xs);

  /* ===== SPACING FIXES ===== */
  /* Override hardcoded spacing in style.css with token system */
  
  /* ===== TRANSITION MAPPINGS ===== */
  /* Map old transition variables to new motion tokens */
  --transition: var(--transition-normal);
  --transition-fast: var(--transition-fast);
  --transition-smooth: var(--transition-slow);
  --transition-spring: var(--transition-spring);
  --transition-theme: var(--transition-normal);
}

/* ===== LIGHT THEME COMPATIBILITY ===== */
:root[data-theme="light"] {
  --bg-ribbon: var(--neutral-100);
  --bg-sidebar: var(--neutral-50);
  --bg-surface: var(--neutral-100);
  --bg-input: var(--neutral-0);
  --bg-button: var(--neutral-100);
  --bg-button-hover: var(--neutral-200);
  --bg-code: var(--neutral-50);
  --bg-inline-code: var(--neutral-100);
  --bg-tab: var(--neutral-100);
  --bg-tab-active: var(--neutral-0);

  --scrollbar-thumb: var(--neutral-300);
  --scrollbar-thumb-hover: var(--neutral-400);
  
  --text-accent: var(--primary-600);
  --text-accent-hover: var(--primary-700);
  --text-link: var(--primary-600);
  --text-link-hover: var(--primary-700);
  --text-inverse: var(--neutral-0);

  --border-focus: var(--primary-600);
  --shadow-color: rgba(0, 0, 0, 0.15);
}

/* ===== HIGH CONTRAST COMPATIBILITY ===== */
:root[data-theme="high-contrast"] {
  --bg-ribbon: hsl(0, 0%, 0%);
  --bg-sidebar: hsl(0, 0%, 5%);
  --bg-surface: hsl(0, 0%, 10%);
  --bg-input: hsl(0, 0%, 10%);
  --bg-button: hsl(0, 0%, 15%);
  --bg-button-hover: hsl(0, 0%, 25%);
  
  --text-accent: hsl(60, 100%, 50%);
  --text-accent-hover: hsl(60, 100%, 60%);
  --text-link: hsl(60, 100%, 50%);
  --text-link-hover: hsl(60, 100%, 60%);
  
  --border-focus: hsl(60, 100%, 50%);
}

/* ===== COMPONENT SPACING FIXES ===== */
/* Fix specific components to use design tokens instead of hardcoded values */

.ribbon-btn {
  gap: var(--space-1) !important;
  padding: var(--space-2) !important;
}

.sidebar-panel-header {
  padding: var(--space-3) var(--space-4) var(--space-2) !important;
}

.ribbon-top, .ribbon-bottom {
  gap: var(--space-1) !important;
}

#ribbon {
  padding: var(--space-2) 0 !important;
}

.panel-title {
  font-size: var(--font-size-xs) !important;
  letter-spacing: var(--letter-spacing-wide) !important;
}

/* Tab system spacing fixes */
.tab-button {
  height: var(--tab-height) !important;
  padding: 0 var(--space-3) !important;
  font-size: var(--font-size-sm) !important;
}

/* Status bar spacing fixes */
#statusbar {
  height: var(--statusbar-height) !important;
  padding: 0 var(--space-3) !important;
  font-size: var(--font-size-xs) !important;
}

/* Breadcrumb spacing fixes */
#breadcrumb-bar {
  height: var(--breadcrumb-height) !important;
  padding: 0 var(--space-3) !important;
}

/* Dialog spacing fixes */
.dialog {
  padding: var(--space-6) !important;
  border-radius: var(--radius-lg) !important;
  gap: var(--space-4) !important;
}

.dialog-actions {
  gap: var(--space-3) !important;
  margin-top: var(--space-4) !important;
}

/* Search input spacing */
.search-input-wrap {
  padding: var(--space-3) !important;
}

/* File tree spacing */
.file-tree-item {
  padding: var(--space-1) var(--space-3) !important;
}

/* Welcome screen spacing */
.welcome-content {
  padding: var(--space-12) var(--space-6) !important;
  max-width: var(--content-width-md);
}

.welcome-actions {
  gap: var(--space-4) !important;
  margin: var(--space-8) 0 !important;
}

.welcome-btn {
  padding: var(--space-3) var(--space-6) !important;
  border-radius: var(--radius-lg) !important;
  font-size: var(--font-size-base) !important;
}

.shortcut {
  padding: var(--space-2) 0 !important;
}

/* Context menu spacing */
.context-menu {
  padding: var(--space-1) !important;
  border-radius: var(--radius-md) !important;
}

.dropdown-item {
  padding: var(--space-2) var(--space-3) !important;
  border-radius: var(--radius-sm) !important;
}

/* Icon button consistency */
.icon-btn {
  width: var(--space-6) !important;
  height: var(--space-6) !important;
  border-radius: var(--radius-sm) !important;
}

/* Ensure proper font families are used */
body {
  font-family: var(--font-sans) !important;
  font-size: var(--font-size-base) !important;
  line-height: var(--line-height-normal) !important;
}

/* Code and monospace elements */
code, pre, .cm-editor {
  font-family: var(--font-mono) !important;
}

/* ===== TRANSITION CONSISTENCY ===== */
/* Ensure all interactive elements use design token transitions */
button, .button, .tab-button, .ribbon-btn, .icon-btn {
  transition: all var(--transition-normal) !important;
}

button:hover, .button:hover, .tab-button:hover, .ribbon-btn:hover, .icon-btn:hover {
  transition: all var(--transition-fast) !important;
}

/* Focus ring consistency */
*:focus-visible {
  outline: none !important;
  box-shadow: var(--focus-ring) !important;
  transition: box-shadow var(--transition-fast) !important;
}
/* ============================================================
   Oxidian v2.0 — Refined Modern Dark
   A polished, Obsidian-surpassing design system.
   Uses design-tokens.css for all values.
   ============================================================ */

/* design-tokens.css loaded via index.html */

/* ─── Reset ───────────────────────────────────────────────── */
*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  color-scheme: dark;
  scroll-behavior: smooth;
  scroll-padding-top: var(--nav-height);
}

html, body {
  height: 100%;
  overflow: hidden;
  font-family: var(--font-ui);
  background: var(--bg-primary);
  color: var(--text-primary);
  font-size: var(--text-base);
  line-height: var(--leading-normal);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

:root[data-theme="light"] html,
:root[data-theme="light"] { color-scheme: light; }

/* ─── Theme Transitions ───────────────────────────────────── */
html, html * {
  transition:
    background-color var(--transition-theme),
    border-color var(--transition-theme),
    color var(--transition-theme),
    box-shadow var(--transition-theme);
}

html *:is(
  .cm-editor, .cm-content, .CodeMirror,
  .graph-container, canvas, video, iframe,
  input[type="range"], .no-transition, .no-transition *
) {
  transition: none !important;
}

/* ─── Selection ───────────────────────────────────────────── */
::selection {
  background: var(--bg-selection);
  color: inherit;
}

/* ─── Links ───────────────────────────────────────────────── */
a {
  color: var(--text-link);
  text-decoration: none;
  transition: color var(--transition-fast);
}
a:hover { color: var(--text-link-hover); }

img { max-width: 100%; display: block; }

/* ─── Form Elements ───────────────────────────────────────── */
input, select, textarea, button {
  background: var(--bg-input);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  font-family: var(--font-ui);
  font-size: var(--text-base);
  outline: none;
  transition:
    border-color var(--transition-fast),
    box-shadow var(--transition-fast),
    background-color var(--transition-fast);
}

input:focus, select:focus, textarea:focus {
  border-color: var(--border-focus);
  box-shadow: 0 0 0 3px var(--accent-surface);
}

input:hover, select:hover, textarea:hover {
  border-color: var(--border-hover);
}

input:disabled, select:disabled, textarea:disabled, button:disabled {
  opacity: 0.45;
  cursor: not-allowed;
  background: var(--bg-tertiary);
}

select {
  appearance: none;
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%236c7086' stroke-width='2'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
  background-size: 16px;
  background-position: right var(--space-2) center;
  background-repeat: no-repeat;
  padding-right: var(--space-8);
}

select option {
  background: var(--bg-secondary);
  color: var(--text-primary);
}

/* Range input */
input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  border: none;
  height: 20px;
  cursor: pointer;
}
input[type="range"]::-webkit-slider-runnable-track {
  height: 4px;
  background: var(--bg-active);
  border-radius: var(--radius-full);
  border: none;
}
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 14px;
  height: 14px;
  border-radius: var(--radius-full);
  background: var(--accent);
  border: none;
  margin-top: -5px;
  box-shadow: var(--shadow-xs);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}
input[type="range"]::-webkit-slider-thumb:hover {
  transform: scale(1.2);
  box-shadow: var(--shadow-glow);
}
input[type="range"]::-moz-range-track {
  height: 4px;
  background: var(--bg-active);
  border-radius: var(--radius-full);
  border: none;
}
input[type="range"]::-moz-range-thumb {
  width: 14px;
  height: 14px;
  border-radius: var(--radius-full);
  background: var(--accent);
  border: none;
}

/* Color input */
input[type="color"] {
  -webkit-appearance: none;
  appearance: none;
  background: var(--bg-surface);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  cursor: pointer;
  padding: 2px;
}
input[type="color"]::-webkit-color-swatch-wrapper { padding: 2px; }
input[type="color"]::-webkit-color-swatch { border: none; border-radius: var(--radius-xs); }

/* ─── Scrollbar ───────────────────────────────────────────── */
::-webkit-scrollbar { width: 7px; height: 7px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: var(--radius-full);
  transition: background var(--transition-fast);
}
::-webkit-scrollbar-thumb:hover { background: var(--scrollbar-thumb-hover); }
::-webkit-scrollbar-corner { background: transparent; }

* {
  scrollbar-width: thin;
  scrollbar-color: var(--scrollbar-thumb) transparent;
}

/* Auto-hide scrollbar */
.auto-hide-scrollbar::-webkit-scrollbar-thumb {
  background: transparent;
}
.auto-hide-scrollbar:hover::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
}
.auto-hide-scrollbar:hover::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
}

/* Firefox auto-hide (simulated) */
#sidebar, #file-tree, #search-results, .preview-content,
.settings-content, .remember-content {
  scrollbar-color: transparent transparent;
}
#sidebar:hover, #file-tree:hover, #search-results:hover,
.preview-content:hover, .settings-content:hover, .remember-content:hover {
  scrollbar-color: var(--scrollbar-thumb) transparent;
}

/* ─── Screen Reader Only ──────────────────────────────────── */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Skip link */
.skip-to-content {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--accent);
  color: var(--text-on-accent);
  padding: var(--space-2) var(--space-4);
  z-index: var(--z-max);
  transition: top var(--transition-normal);
}
.skip-to-content:focus { top: 0; }

/* ─── Animations ──────────────────────────────────────────── */
@keyframes fade-in {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slide-in-right {
  from { opacity: 0; transform: translateX(8px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes slide-up {
  from { opacity: 0; transform: translateY(12px) scale(0.98); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes ctx-enter {
  from { opacity: 0; transform: scale(0.96) translateY(-4px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}

@keyframes pulse-glow {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.8; }
}

@keyframes tab-indicator {
  from { transform: scaleX(0); opacity: 0; }
  to { transform: scaleX(1); opacity: 1; }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes breathe {
  0%, 100% { opacity: 0.6; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.03); }
}

@keyframes skeleton-pulse {
  0% { background-position: -200px 0; }
  100% { background-position: calc(200px + 100%) 0; }
}

/* ════════════════════════════════════════════════════════════
   APP LAYOUT
   ════════════════════════════════════════════════════════════ */

#app {
  display: flex;
  flex-direction: row;
  height: 100vh;
  width: 100vw;
}

#main-layout {
  display: flex;
  flex: 1;
  overflow: hidden;
}

/* ════════════════════════════════════════════════════════════
   RIBBON (left icon bar)
   ════════════════════════════════════════════════════════════ */

#ribbon {
  width: var(--ribbon-width);
  min-width: var(--ribbon-width);
  background: var(--bg-ribbon);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-2) 0;
  border-right: 1px solid var(--border-color);
  flex-shrink: 0;
  -webkit-app-region: drag;
  z-index: var(--z-sidebar);
}

.ribbon-top, .ribbon-bottom {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-0_5);
}

.ribbon-btn {
  -webkit-app-region: no-drag;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-md);
  transition:
    color var(--transition-fast),
    background var(--transition-fast),
    transform var(--transition-fast);
  position: relative;
}

.ribbon-btn:hover {
  color: var(--text-secondary);
  background: var(--bg-hover);
  transform: scale(1.06);
}

.ribbon-btn:active {
  transform: scale(0.94);
  transition-duration: var(--duration-instant);
}

.ribbon-btn.active {
  color: var(--accent);
  background: var(--accent-surface);
}

.ribbon-btn.active::after {
  content: '';
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 2px;
  height: 16px;
  background: var(--accent);
  border-radius: var(--radius-full);
}

.ribbon-btn svg {
  width: 18px;
  height: 18px;
}

/* Ribbon tooltip */
.ribbon-btn[data-tooltip]::before {
  content: attr(data-tooltip);
  position: absolute;
  left: calc(100% + 8px);
  top: 50%;
  transform: translateY(-50%);
  background: var(--bg-tooltip);
  color: var(--text-primary);
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-md);
  font-size: var(--text-xs);
  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--transition-fast);
  z-index: var(--z-tooltip);
  box-shadow: var(--shadow-md);
}

.ribbon-btn[data-tooltip]:hover::before {
  opacity: 1;
  transition-delay: 400ms;
}

/* ════════════════════════════════════════════════════════════
   SIDEBAR
   ════════════════════════════════════════════════════════════ */

#sidebar {
  width: var(--sidebar-width);
  min-width: var(--sidebar-min);
  max-width: var(--sidebar-max);
  background: var(--bg-sidebar);
  border-right: 1px solid var(--border-color);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  flex-shrink: 0;
  box-shadow: inset -1px 0 0 rgba(255, 255, 255, 0.015);
  z-index: var(--z-sidebar);
}

.sidebar-panel {
  display: none;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
}

.sidebar-panel.active {
  display: flex;
  animation: fade-in var(--duration-normal) var(--ease-out);
}

.sidebar-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-3) var(--space-3) var(--space-1_5);
  flex-shrink: 0;
}

.panel-title {
  font-family: var(--font-heading);
  font-size: var(--text-xs);
  font-weight: var(--weight-semibold);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wider);
  color: var(--text-muted);
}

.sidebar-actions {
  display: flex;
  gap: var(--space-0_5);
}

.icon-btn {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: var(--space-1) var(--space-1_5);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  transition:
    background var(--transition-fast),
    color var(--transition-fast);
}

.icon-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.icon-btn svg { width: 14px; height: 14px; }

/* ─── File Tree ───────────────────────────────────────────── */
#file-tree {
  flex: 1;
  overflow-y: auto;
  padding: var(--space-0_5) 0;
}

.tree-item {
  display: flex;
  align-items: center;
  padding: var(--space-1) var(--space-3) var(--space-1) var(--space-2);
  cursor: pointer;
  color: var(--text-secondary);
  font-size: var(--text-base);
  transition:
    background var(--transition-fast),
    color var(--transition-fast);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  border-radius: var(--radius-sm);
  height: 28px;
  margin: 0 var(--space-1);
  position: relative;
}

.tree-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.tree-item.active {
  background: var(--accent-surface);
  color: var(--text-primary);
}

.tree-item.active::before {
  content: '';
  position: absolute;
  left: 0;
  top: var(--space-1);
  bottom: var(--space-1);
  width: 2.5px;
  background: var(--accent);
  border-radius: var(--radius-full);
  box-shadow: 0 0 6px var(--accent-glow);
}

.tree-item .icon {
  margin-right: var(--space-1_5);
  flex-shrink: 0;
  width: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.tree-item .icon svg { width: 14px; height: 14px; }

.tree-item .chevron {
  width: 16px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-faint);
  transition: transform var(--transition-fast);
}

.tree-item .chevron.open { transform: rotate(90deg); }

.tree-item .name {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  min-width: 0;
}

/* Depth indentation */
.tree-item[data-depth="0"] { padding-left: var(--space-2); }
.tree-item[data-depth="1"] { padding-left: var(--space-6); }
.tree-item[data-depth="2"] { padding-left: var(--space-10); }
.tree-item[data-depth="3"] { padding-left: 56px; }
.tree-item[data-depth="4"] { padding-left: 72px; }

/* Depth lines */
.tree-folder-children {
  position: relative;
}
.tree-folder-children::before {
  content: '';
  position: absolute;
  left: 18px;
  top: 0;
  bottom: 0;
  width: 1px;
  background: var(--border-color);
  opacity: 0.5;
}
.tree-folder-children .tree-folder-children::before { left: 34px; }
.tree-folder-children .tree-folder-children .tree-folder-children::before { left: 50px; }

/* ─── Tags Section ────────────────────────────────────────── */
#tags-section {
  border-top: 1px solid var(--border-color);
  max-height: 180px;
  overflow-y: auto;
  flex-shrink: 0;
}

#tags-list {
  padding: var(--space-1) var(--space-3) var(--space-2);
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-1);
}

.tag-pill {
  background: var(--accent-surface);
  color: var(--text-purple);
  padding: var(--space-0_5) var(--space-3);
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
  cursor: pointer;
  transition: all var(--transition-normal);
  border: 1px solid transparent;
  font-weight: var(--weight-medium);
}

.tag-pill:hover {
  background: rgba(203, 166, 247, 0.18);
  border-color: rgba(203, 166, 247, 0.3);
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(203, 166, 247, 0.12);
}

/* ─── Sidebar Search ──────────────────────────────────────── */
.search-input-wrap {
  padding: var(--space-1) var(--space-3) var(--space-2);
}

#search-input {
  width: 100%;
  background: var(--bg-surface);
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  padding: var(--space-1_5) var(--space-3);
  border-radius: var(--radius-md);
  font-size: var(--text-base);
  font-family: var(--font-ui);
  outline: none;
  transition:
    border-color var(--transition-fast),
    box-shadow var(--transition-fast);
}

#search-input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-surface);
}

#search-results {
  overflow-y: auto;
  flex: 1;
  padding: 0 var(--space-1);
}

.search-result-item {
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background var(--transition-fast);
  margin-bottom: var(--space-px);
}

.search-result-item:hover {
  background: var(--bg-hover);
}

.search-result-title {
  font-weight: var(--weight-semibold);
  color: var(--accent);
  font-size: var(--text-base);
}

.search-result-path {
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.search-result-snippet {
  font-size: var(--text-sm);
  color: var(--text-secondary);
  line-height: var(--leading-snug);
  margin-top: var(--space-0_5);
}

.empty-panel-message {
  padding: var(--space-4) var(--space-3);
  color: var(--text-muted);
  font-size: var(--text-sm);
  font-style: italic;
}

/* ─── Resize Handle ───────────────────────────────────────── */
.resize-handle {
  width: 3px;
  cursor: col-resize;
  background: transparent;
  transition: background var(--transition-normal);
  flex-shrink: 0;
  position: relative;
}

.resize-handle::after {
  content: '';
  position: absolute;
  left: -3px;
  right: -3px;
  top: 0;
  bottom: 0;
}

.resize-handle:hover,
.resize-handle.active {
  background: var(--accent);
  box-shadow: 0 0 8px var(--accent-glow);
  transition-delay: 80ms;
}

/* ════════════════════════════════════════════════════════════
   CONTENT AREA
   ════════════════════════════════════════════════════════════ */

#content-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
  min-width: 0;
}

/* ════════════════════════════════════════════════════════════
   TAB BAR
   ════════════════════════════════════════════════════════════ */

#tab-bar {
  height: var(--tab-height);
  min-height: var(--tab-height);
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border-color);
  display: flex;
  align-items: flex-end;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-app-region: drag;
}

#tab-bar::-webkit-scrollbar { height: 0; }

#tab-list {
  display: flex;
  align-items: flex-end;
  height: 100%;
  min-width: 0;
}

.tab {
  -webkit-app-region: no-drag;
  display: flex;
  align-items: center;
  gap: var(--space-1_5);
  padding: 0 var(--space-4);
  height: calc(var(--tab-height) - 2px);
  background: var(--bg-tertiary);
  border-right: 1px solid var(--border-color);
  color: var(--text-muted);
  font-size: var(--text-sm);
  cursor: pointer;
  white-space: nowrap;
  max-width: 200px;
  min-width: 80px;
  transition:
    background var(--transition-fast),
    color var(--transition-fast);
  flex-shrink: 0;
  position: relative;
}

.tab:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
}

.tab.active {
  background: var(--bg-primary);
  color: var(--text-primary);
}

.tab.active::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: var(--space-2);
  right: var(--space-2);
  height: 2px;
  background: var(--accent);
  border-radius: var(--radius-full) var(--radius-full) 0 0;
  animation: tab-indicator var(--duration-normal) var(--ease-out);
  box-shadow: 0 0 8px var(--accent-glow);
}

.tab .tab-icon {
  display: flex;
  align-items: center;
  color: var(--text-muted);
  flex-shrink: 0;
}
.tab .tab-icon svg { width: 13px; height: 13px; }

.tab .tab-title {
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
}

.tab .tab-dirty {
  display: none;
  width: 8px;
  height: 8px;
  flex-shrink: 0;
  background: var(--accent);
  border-radius: var(--radius-full);
}
.tab.dirty .tab-dirty { display: block; }

.tab .tab-close {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  border-radius: var(--radius-sm);
  color: var(--text-faint);
  opacity: 0;
  transition: all var(--transition-fast);
  flex-shrink: 0;
  background: none;
  border: none;
  cursor: pointer;
}
.tab:hover .tab-close { opacity: 1; }
.tab.dirty:not(:hover) .tab-dirty { display: block; }
.tab.dirty:not(:hover) .tab-close { display: none; }
.tab.dirty:hover .tab-dirty { display: none; }
.tab.dirty:hover .tab-close { opacity: 1; }
.tab .tab-close:hover {
  background: var(--bg-active);
  color: var(--text-primary);
}

/* New tab button */
#new-tab-btn,
.new-tab-btn {
  -webkit-app-region: no-drag;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  margin: auto var(--space-1);
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-sm);
  font-size: var(--text-lg);
  transition: all var(--transition-fast);
}
#new-tab-btn:hover,
.new-tab-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Tab drag feedback */
.tab.dragging {
  opacity: 0.5;
}
.tab.drag-over-left {
  box-shadow: inset 2px 0 0 var(--accent);
}
.tab.drag-over-right {
  box-shadow: inset -2px 0 0 var(--accent);
}

/* ════════════════════════════════════════════════════════════
   BREADCRUMB BAR
   ════════════════════════════════════════════════════════════ */

#breadcrumb-bar {
  height: var(--breadcrumb-height);
  min-height: var(--breadcrumb-height);
  background: var(--bg-primary);
  border-bottom: 1px solid var(--border-color);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 var(--space-4);
  font-size: var(--text-sm);
  color: var(--text-muted);
}

#breadcrumb-path {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  overflow: hidden;
  flex: 1;
  min-width: 0;
}

.breadcrumb-item {
  color: var(--text-muted);
  font-size: var(--text-sm);
  cursor: pointer;
  transition: color var(--transition-fast);
}
.breadcrumb-item:hover { color: var(--text-primary); }
.breadcrumb-item:last-child { color: var(--text-secondary); }

.breadcrumb-sep {
  color: var(--text-faint);
  font-size: var(--text-xs);
  user-select: none;
}

/* ─── View Toolbar ────────────────────────────────────────── */
#view-toolbar {
  display: flex;
  align-items: center;
  gap: var(--space-0_5);
  flex-shrink: 0;
}

.view-toolbar-btn {
  display: flex;
  align-items: center;
  gap: var(--space-1_5);
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: var(--space-1) var(--space-1_5);
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  font-family: var(--font-ui);
  transition: all var(--transition-fast);
  white-space: nowrap;
}
.view-toolbar-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}
.view-toolbar-btn.active { color: var(--accent); }
.view-toolbar-btn svg { flex-shrink: 0; width: 14px; height: 14px; }

.view-mode-label { font-size: var(--text-xs); }

/* ─── Dropdown Menu ───────────────────────────────────────── */
.view-toolbar-dropdown-wrap { position: relative; }

.dropdown-menu {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: var(--space-1);
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  padding: var(--space-1);
  min-width: 200px;
  box-shadow: var(--shadow-lg);
  z-index: var(--z-dropdown);
  animation: ctx-enter 120ms var(--ease-out);
  backdrop-filter: blur(var(--glass-blur));
}

.dropdown-menu.hidden { display: none; }

.dropdown-item {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-1_5) var(--space-3);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  font-size: var(--text-base);
  cursor: pointer;
  transition: all var(--transition-fast);
}
.dropdown-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}
.dropdown-item.disabled {
  opacity: 0.4;
  cursor: not-allowed;
}
.dropdown-item.disabled:hover { background: none; }

.dropdown-separator {
  height: 1px;
  background: var(--border-color);
  margin: var(--space-1) var(--space-2);
}

/* ════════════════════════════════════════════════════════════
   EDITOR PANES
   ════════════════════════════════════════════════════════════ */

#editor-area {
  display: flex;
  flex: 1;
  overflow: hidden;
  position: relative;
}

#pane-container {
  display: flex;
  flex: 1;
  overflow: hidden;
  position: relative;
}

.pane {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
  min-width: 0;
}

.editor-pane-half,
.preview-pane-half {
  flex: 1;
  overflow-y: auto;
  padding: 0;
}

/* Editor textarea */
#editor, .editor-textarea, textarea.editor-input {
  width: 100%;
  height: 100%;
  background: var(--bg-primary);
  color: var(--text-primary);
  border: none;
  outline: none;
  resize: none;
  font-family: var(--font-editor);
  font-size: 15px;
  line-height: var(--leading-relaxed);
  padding: var(--space-8) var(--space-10);
  max-width: var(--max-content-width);
  margin: 0 auto;
  caret-color: var(--accent);
  tab-size: 4;
}

#editor::placeholder, .editor-textarea::placeholder {
  color: var(--text-faint);
  font-style: italic;
}

/* Line numbers */
.line-numbers {
  position: absolute;
  left: 0;
  top: 0;
  padding: var(--space-8) 0;
  width: 48px;
  text-align: right;
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  line-height: var(--leading-relaxed);
  color: var(--text-faint);
  user-select: none;
  pointer-events: none;
}

.line-number.active { color: var(--text-muted); }

/* Preview */
.preview-content, .reading-view {
  padding: var(--space-8) var(--space-10);
  max-width: var(--max-content-width);
  margin: 0 auto;
  overflow-y: auto;
  height: 100%;
}

/* View modes */
.pane.reading-mode .editor-pane-half { display: none; }
.pane.reading-mode .reading-view { display: block; }
.pane.source-mode .preview-pane-half { display: none; }
.pane.live-preview-mode .preview-pane-half { display: none; }

/* Focus line */
.editor-focus-line {
  position: absolute;
  left: 0;
  right: 0;
  height: 1.6em;
  background: var(--accent-surface);
  border-radius: var(--radius-sm);
  pointer-events: none;
  transition: top var(--transition-fast);
  opacity: 0.5;
}

/* Split pane */
.split-handle {
  width: 3px;
  cursor: col-resize;
  background: var(--border-color);
  flex-shrink: 0;
  transition: background var(--transition-fast);
}
.split-handle:hover { background: var(--accent); }

/* ════════════════════════════════════════════════════════════
   BACKLINKS PANEL (right side)
   ════════════════════════════════════════════════════════════ */

#backlinks-panel,
.backlinks-panel {
  width: 280px;
  min-width: 200px;
  max-width: 400px;
  background: var(--bg-sidebar);
  border-left: 1px solid var(--border-color);
  display: none;
  flex-direction: column;
  overflow: hidden;
}

#backlinks-panel.open,
.backlinks-panel.open {
  display: flex;
  animation: slide-in-right var(--duration-normal) var(--ease-out);
}

.backlinks-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-3);
  border-bottom: 1px solid var(--border-color);
}

.backlinks-title {
  font-family: var(--font-heading);
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  color: var(--text-secondary);
}

.backlinks-list {
  flex: 1;
  overflow-y: auto;
  padding: var(--space-2);
}

.backlink-item {
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background var(--transition-fast);
  margin-bottom: var(--space-px);
}
.backlink-item:hover { background: var(--bg-hover); }

.backlink-title {
  font-weight: var(--weight-medium);
  color: var(--text-accent);
  font-size: var(--text-base);
}

.backlink-context {
  font-size: var(--text-sm);
  color: var(--text-muted);
  margin-top: var(--space-0_5);
  line-height: var(--leading-snug);
}

/* ════════════════════════════════════════════════════════════
   WELCOME SCREEN
   ════════════════════════════════════════════════════════════ */

#welcome-screen, .welcome-screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  text-align: center;
  padding: var(--space-8);
  animation: fade-in var(--duration-smooth) var(--ease-out);
}

.welcome-logo {
  font-size: 56px;
  margin-bottom: var(--space-4);
  animation: breathe 4s ease-in-out infinite;
  filter: drop-shadow(0 0 20px var(--accent-glow));
}

.welcome-title {
  font-family: var(--font-heading);
  font-size: var(--text-3xl);
  font-weight: var(--weight-bold);
  color: var(--text-primary);
  margin-bottom: var(--space-2);
  letter-spacing: var(--tracking-tight);
}

.welcome-subtitle {
  color: var(--text-muted);
  font-size: var(--text-lg);
  margin-bottom: var(--space-8);
  max-width: 440px;
}

.welcome-actions {
  display: flex;
  gap: var(--space-3);
  flex-wrap: wrap;
  justify-content: center;
}

.welcome-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-6);
  border-radius: var(--radius-lg);
  font-size: var(--text-md);
  font-weight: var(--weight-medium);
  cursor: pointer;
  transition: all var(--transition-normal);
  border: 1px solid var(--border-color);
  background: var(--bg-surface);
  color: var(--text-primary);
}

.welcome-btn:hover {
  background: var(--bg-hover);
  border-color: var(--border-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.welcome-btn:active { transform: translateY(0); }

.welcome-btn.primary {
  background: var(--accent);
  color: var(--text-on-accent);
  border-color: var(--accent);
}

.welcome-btn.primary:hover {
  background: var(--accent-light);
  border-color: var(--accent-light);
  box-shadow: var(--shadow-glow);
}

.welcome-shortcuts {
  margin-top: var(--space-10);
  color: var(--text-muted);
  font-size: var(--text-sm);
}

.welcome-shortcuts kbd {
  background: var(--bg-surface);
  border: 1px solid var(--border-color);
  padding: var(--space-0_5) var(--space-2);
  border-radius: var(--radius-sm);
  font-family: var(--font-mono);
  font-size: var(--text-xs);
  margin: 0 var(--space-0_5);
}

/* ════════════════════════════════════════════════════════════
   STATUS BAR
   ════════════════════════════════════════════════════════════ */

#status-bar {
  height: var(--statusbar-height);
  min-height: var(--statusbar-height);
  background: var(--bg-tertiary);
  border-top: 1px solid var(--border-color);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 var(--space-3);
  font-size: var(--text-2xs);
  color: var(--text-muted);
  gap: var(--space-2);
}

.status-left, .status-right {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.status-item {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  cursor: default;
  transition: color var(--transition-fast);
}
.status-item:hover { color: var(--text-secondary); }
.status-item.clickable { cursor: pointer; }
.status-item svg { width: 12px; height: 12px; }

.status-separator {
  width: 1px;
  height: 12px;
  background: var(--border-color);
}

/* ════════════════════════════════════════════════════════════
   DIALOGS & MODALS
   ════════════════════════════════════════════════════════════ */

.dialog-overlay, .modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.55);
  backdrop-filter: blur(6px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-modal);
  animation: fade-in var(--duration-normal) var(--ease-out);
}

.dialog, .modal, .modal-content {
  background: var(--bg-modal);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-xl);
  padding: var(--space-6);
  min-width: 360px;
  max-width: 560px;
  width: 90%;
  box-shadow: var(--shadow-xl);
  animation: slide-up var(--duration-smooth) var(--ease-out);
}

.dialog-title, .modal-title {
  font-family: var(--font-heading);
  font-size: var(--text-xl);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  margin-bottom: var(--space-4);
  letter-spacing: var(--tracking-tight);
}

.dialog-body, .modal-body {
  color: var(--text-secondary);
  font-size: var(--text-md);
  line-height: var(--leading-relaxed);
  margin-bottom: var(--space-6);
}

.dialog-input, .modal-input {
  width: 100%;
  padding: var(--space-2) var(--space-3);
  background: var(--bg-surface);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--text-md);
  font-family: var(--font-ui);
  outline: none;
  transition:
    border-color var(--transition-fast),
    box-shadow var(--transition-fast);
}

.dialog-input:focus, .modal-input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-surface);
}

.dialog-actions, .modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-2);
}

/* ─── Buttons ─────────────────────────────────────────────── */
.btn, button.btn {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-4);
  border-radius: var(--radius-md);
  font-size: var(--text-base);
  font-weight: var(--weight-medium);
  font-family: var(--font-ui);
  cursor: pointer;
  transition: all var(--transition-normal);
  border: 1px solid var(--border-color);
  background: var(--bg-button);
  color: var(--text-primary);
}

.btn:hover {
  background: var(--bg-button-hover);
  border-color: var(--border-hover);
}

.btn:active {
  transform: scale(0.97);
  transition-duration: var(--duration-instant);
}

.btn-primary, .btn.primary {
  background: var(--accent);
  color: var(--text-on-accent);
  border-color: transparent;
}

.btn-primary:hover, .btn.primary:hover {
  background: var(--accent-light);
  box-shadow: var(--shadow-glow);
}

.btn-danger {
  background: var(--text-red);
  color: #fff;
  border-color: transparent;
}
.btn-danger:hover {
  filter: brightness(1.1);
}

.btn-ghost {
  background: transparent;
  border-color: transparent;
  color: var(--text-secondary);
}
.btn-ghost:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* ════════════════════════════════════════════════════════════
   CONTEXT MENU
   ════════════════════════════════════════════════════════════ */

.context-menu {
  position: fixed;
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  padding: var(--space-1);
  min-width: 180px;
  box-shadow: var(--shadow-lg);
  z-index: var(--z-popover);
  animation: ctx-enter 100ms var(--ease-out);
  backdrop-filter: blur(var(--glass-blur));
}

.context-item {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-1_5) var(--space-3);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  font-size: var(--text-base);
  cursor: pointer;
  transition: all var(--transition-fast);
}
.context-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}
.context-item.danger { color: var(--text-red); }
.context-item.danger:hover { background: rgba(243, 139, 168, 0.1); }

.context-separator {
  height: 1px;
  background: var(--border-color);
  margin: var(--space-1) var(--space-2);
}

.context-shortcut {
  margin-left: auto;
  font-size: var(--text-2xs);
  color: var(--text-faint);
  font-family: var(--font-mono);
}

/* ════════════════════════════════════════════════════════════
   COMMAND PALETTE (Spotlight-style)
   ════════════════════════════════════════════════════════════ */

.command-palette-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: 15vh;
  z-index: var(--z-command-palette);
  animation: fade-in var(--duration-fast) var(--ease-out);
}

.command-palette {
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-xl);
  width: 560px;
  max-width: 90vw;
  max-height: 440px;
  overflow: hidden;
  box-shadow: var(--shadow-xl);
  animation: slide-up var(--duration-normal) var(--ease-out);
}

.command-palette-input-wrap {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-4) var(--space-5);
  border-bottom: 1px solid var(--border-color);
}

.command-palette-icon {
  color: var(--text-muted);
  flex-shrink: 0;
}
.command-palette-icon svg { width: 18px; height: 18px; }

.command-palette-input {
  flex: 1;
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-size: var(--text-lg);
  font-family: var(--font-ui);
  outline: none;
}
.command-palette-input::placeholder {
  color: var(--text-faint);
}

.command-palette-results {
  max-height: 360px;
  overflow-y: auto;
  padding: var(--space-1);
}

.command-palette-item {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-2) var(--space-4);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background var(--transition-fast);
  color: var(--text-secondary);
  font-size: var(--text-md);
}

.command-palette-item:hover,
.command-palette-item.selected {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.command-palette-item.selected {
  background: var(--accent-surface);
}

.command-palette-item-icon {
  color: var(--text-muted);
  flex-shrink: 0;
}

.command-palette-item-title { flex: 1; }

.command-palette-item-shortcut {
  font-size: var(--text-2xs);
  color: var(--text-faint);
  font-family: var(--font-mono);
}

/* Quick Switcher (same style) */
.quickswitcher-overlay { composes: command-palette-overlay; }
.quickswitcher { composes: command-palette; }

/* ════════════════════════════════════════════════════════════
   NOTICE / TOAST
   ════════════════════════════════════════════════════════════ */

.notice, .toast {
  position: fixed;
  top: var(--space-4);
  right: var(--space-4);
  background: var(--bg-surface-raised);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  padding: var(--space-3) var(--space-5);
  color: var(--text-primary);
  font-size: var(--text-md);
  box-shadow: var(--shadow-lg);
  z-index: var(--z-toast);
  animation: slide-in-right var(--duration-smooth) var(--ease-out);
  max-width: 360px;
  backdrop-filter: blur(var(--glass-blur));
}

.notice.success { border-left: 3px solid var(--text-green); }
.notice.error { border-left: 3px solid var(--text-red); }
.notice.warning { border-left: 3px solid var(--text-yellow); }

/* ════════════════════════════════════════════════════════════
   MARKDOWN PREVIEW
   ════════════════════════════════════════════════════════════ */

.preview-content h1,
.reading-view h1 {
  font-family: var(--font-heading);
  font-size: var(--text-4xl);
  font-weight: var(--weight-bold);
  color: var(--text-primary);
  margin: var(--space-8) 0 var(--space-4);
  line-height: var(--leading-tight);
  letter-spacing: var(--tracking-tight);
}

.preview-content h2,
.reading-view h2 {
  font-family: var(--font-heading);
  font-size: var(--text-2xl);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  margin: var(--space-6) 0 var(--space-3);
  line-height: var(--leading-snug);
  letter-spacing: var(--tracking-tight);
}

.preview-content h3,
.reading-view h3 {
  font-family: var(--font-heading);
  font-size: var(--text-xl);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  margin: var(--space-5) 0 var(--space-2);
}

.preview-content h4, .preview-content h5, .preview-content h6,
.reading-view h4, .reading-view h5, .reading-view h6 {
  font-family: var(--font-heading);
  font-weight: var(--weight-semibold);
  color: var(--text-secondary);
  margin: var(--space-4) 0 var(--space-2);
}

.preview-content h4, .reading-view h4 { font-size: var(--text-lg); }
.preview-content h5, .reading-view h5 { font-size: var(--text-md); }
.preview-content h6, .reading-view h6 { font-size: var(--text-base); color: var(--text-muted); }

.preview-content p,
.reading-view p {
  margin-bottom: var(--space-4);
  line-height: var(--leading-relaxed);
}

.preview-content strong, .reading-view strong { font-weight: var(--weight-semibold); color: var(--text-primary); }
.preview-content em, .reading-view em { font-style: italic; }

.preview-content blockquote,
.reading-view blockquote {
  border-left: 3px solid var(--accent);
  padding: var(--space-2) var(--space-4);
  margin: var(--space-4) 0;
  background: var(--accent-surface);
  border-radius: 0 var(--radius-md) var(--radius-md) 0;
  color: var(--text-secondary);
}

.preview-content code,
.reading-view code {
  font-family: var(--font-mono);
  font-size: 0.9em;
  background: var(--bg-inline-code);
  padding: var(--space-0_5) var(--space-1_5);
  border-radius: var(--radius-sm);
  color: var(--text-pink);
}

.preview-content pre,
.reading-view pre {
  background: var(--bg-code);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  overflow-x: auto;
  margin: var(--space-4) 0;
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  line-height: var(--leading-relaxed);
}
.preview-content pre code,
.reading-view pre code {
  background: none;
  padding: 0;
  color: var(--text-primary);
  font-size: inherit;
}

.preview-content ul, .preview-content ol,
.reading-view ul, .reading-view ol {
  padding-left: var(--space-6);
  margin-bottom: var(--space-4);
}

.preview-content li,
.reading-view li {
  margin-bottom: var(--space-1);
  line-height: var(--leading-relaxed);
}

.preview-content hr,
.reading-view hr {
  border: none;
  border-top: 1px solid var(--border-color);
  margin: var(--space-8) 0;
}

.preview-content a, .reading-view a {
  color: var(--text-link);
  text-decoration: underline;
  text-decoration-color: rgba(137, 180, 250, 0.3);
  text-underline-offset: 2px;
  transition: all var(--transition-fast);
}
.preview-content a:hover, .reading-view a:hover {
  text-decoration-color: var(--text-link);
  color: var(--text-link-hover);
}

.preview-content img, .reading-view img {
  border-radius: var(--radius-lg);
  margin: var(--space-4) 0;
  box-shadow: var(--shadow-md);
}

.preview-content table, .reading-view table {
  width: 100%;
  border-collapse: collapse;
  margin: var(--space-4) 0;
  font-size: var(--text-sm);
}
.preview-content th, .reading-view th {
  background: var(--bg-surface);
  font-weight: var(--weight-semibold);
  text-align: left;
  padding: var(--space-2) var(--space-3);
  border-bottom: 2px solid var(--border-color);
}
.preview-content td, .reading-view td {
  padding: var(--space-2) var(--space-3);
  border-bottom: 1px solid var(--border-color);
}

/* Task lists */
.preview-content input[type="checkbox"],
.reading-view input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: var(--accent);
  margin-right: var(--space-2);
  vertical-align: middle;
}

/* Math / KaTeX */
.preview-content .math, .reading-view .math { overflow-x: auto; }

/* ════════════════════════════════════════════════════════════
   SETTINGS
   ════════════════════════════════════════════════════════════ */

.settings-container {
  display: flex;
  height: 100%;
  overflow: hidden;
}

.settings-nav {
  width: 200px;
  min-width: 160px;
  background: var(--bg-sidebar);
  border-right: 1px solid var(--border-color);
  overflow-y: auto;
  padding: var(--space-2);
}

.settings-nav-item {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  font-size: var(--text-base);
  cursor: pointer;
  transition: all var(--transition-fast);
  margin-bottom: var(--space-0_5);
}
.settings-nav-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}
.settings-nav-item.active {
  background: var(--accent-surface);
  color: var(--text-primary);
}
.settings-nav-item svg { width: 16px; height: 16px; flex-shrink: 0; }

.settings-content {
  flex: 1;
  overflow-y: auto;
  padding: var(--space-6) var(--space-8);
}

.settings-section {
  margin-bottom: var(--space-8);
}

.settings-section-title {
  font-family: var(--font-heading);
  font-size: var(--text-xl);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  margin-bottom: var(--space-4);
  padding-bottom: var(--space-2);
  border-bottom: 1px solid var(--border-color);
  letter-spacing: var(--tracking-tight);
}

/* Setting Item */
.setting-item {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: var(--space-6);
  padding: var(--space-3) 0;
  border-bottom: 1px solid var(--border-light);
}
.setting-item:last-child { border-bottom: none; }

.setting-info { flex: 1; min-width: 0; }
.setting-name {
  font-weight: var(--weight-medium);
  color: var(--text-primary);
  font-size: var(--text-md);
  margin-bottom: var(--space-0_5);
}
.setting-desc {
  color: var(--text-muted);
  font-size: var(--text-sm);
  line-height: var(--leading-snug);
}

.setting-control {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

/* Toggle Switch */
.toggle-switch {
  position: relative;
  width: 40px;
  height: 22px;
  background: var(--bg-active);
  border-radius: var(--radius-full);
  cursor: pointer;
  transition: background var(--transition-normal);
  border: none;
}
.toggle-switch::after {
  content: '';
  position: absolute;
  top: 3px;
  left: 3px;
  width: 16px;
  height: 16px;
  background: var(--text-secondary);
  border-radius: var(--radius-full);
  transition: all var(--transition-spring);
  box-shadow: var(--shadow-xs);
}
.toggle-switch.active {
  background: var(--accent);
}
.toggle-switch.active::after {
  left: 21px;
  background: var(--text-on-accent);
}

/* Theme Cards */
.theme-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: var(--space-3);
}

.theme-card {
  position: relative;
  border: 2px solid var(--border-color);
  border-radius: var(--radius-lg);
  overflow: hidden;
  cursor: pointer;
  transition: all var(--transition-normal);
  background: var(--bg-surface);
}
.theme-card:hover {
  border-color: var(--border-hover);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}
.theme-card.active {
  border-color: var(--accent);
  box-shadow: 0 0 0 1px var(--accent), var(--shadow-glow);
}

.theme-preview {
  height: 60px;
  border-radius: var(--radius-md) var(--radius-md) 0 0;
}

.theme-card span {
  display: block;
  padding: var(--space-2);
  text-align: center;
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--text-secondary);
}
.theme-card.active span { color: var(--accent); }

.theme-preview-default { background: linear-gradient(135deg, #181826, #262640); }
.theme-preview-light { background: linear-gradient(135deg, #f2f2fa, #e6e6f0); }
.theme-preview-nord { background: linear-gradient(135deg, #2e3440, #4c566a); }
.theme-preview-solarized { background: linear-gradient(135deg, #002b36, #073642); }
.theme-preview-dracula { background: linear-gradient(135deg, #282a36, #44475a); }
.theme-preview-gruvbox { background: linear-gradient(135deg, #282828, #504945); }
.theme-preview-rose-pine { background: linear-gradient(135deg, #191724, #26233a); }
.theme-preview-high-contrast { background: linear-gradient(135deg, #000000, #1a1a1a); }

/* ════════════════════════════════════════════════════════════
   ONBOARDING / FIRST-TIME SETUP
   ════════════════════════════════════════════════════════════ */

.onboarding-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(10px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-modal);
}

.onboarding-card {
  background: var(--bg-modal);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-2xl);
  padding: var(--space-10);
  max-width: 560px;
  width: 90%;
  text-align: center;
  box-shadow: var(--shadow-xl);
  animation: slide-up var(--duration-smooth) var(--ease-out);
}

.onboarding-progress {
  display: flex;
  gap: var(--space-2);
  justify-content: center;
  margin-bottom: var(--space-8);
}

.onboarding-dot {
  width: 8px;
  height: 8px;
  border-radius: var(--radius-full);
  background: var(--bg-active);
  transition: all var(--transition-normal);
}
.onboarding-dot.active {
  background: var(--accent);
  width: 24px;
  box-shadow: 0 0 8px var(--accent-glow);
}
.onboarding-dot.completed {
  background: var(--text-green);
}

.onboarding-title {
  font-family: var(--font-heading);
  font-size: var(--text-2xl);
  font-weight: var(--weight-bold);
  color: var(--text-primary);
  margin-bottom: var(--space-4);
  letter-spacing: var(--tracking-tight);
}

.onboarding-desc {
  color: var(--text-secondary);
  font-size: var(--text-md);
  line-height: var(--leading-relaxed);
  margin-bottom: var(--space-6);
}

/* ════════════════════════════════════════════════════════════
   OUTLINE PANEL
   ════════════════════════════════════════════════════════════ */

.outline-list { padding: var(--space-1); }

.outline-item {
  display: flex;
  align-items: center;
  padding: var(--space-1) var(--space-3);
  border-radius: var(--radius-sm);
  cursor: pointer;
  color: var(--text-secondary);
  font-size: var(--text-sm);
  transition: all var(--transition-fast);
}
.outline-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}
.outline-item.active {
  color: var(--accent);
  background: var(--accent-surface);
}

.outline-item[data-level="1"] { padding-left: var(--space-3); font-weight: var(--weight-semibold); }
.outline-item[data-level="2"] { padding-left: var(--space-6); }
.outline-item[data-level="3"] { padding-left: var(--space-10); font-size: var(--text-xs); }
.outline-item[data-level="4"] { padding-left: 56px; font-size: var(--text-xs); color: var(--text-muted); }

/* ════════════════════════════════════════════════════════════
   BOOKMARKS & RECENT FILES
   ════════════════════════════════════════════════════════════ */

.bookmark-item, .recent-file-item {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-1_5) var(--space-3);
  border-radius: var(--radius-sm);
  cursor: pointer;
  color: var(--text-secondary);
  font-size: var(--text-sm);
  transition: all var(--transition-fast);
}
.bookmark-item:hover, .recent-file-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.bookmark-actions, .recent-file-date {
  margin-left: auto;
  font-size: var(--text-2xs);
  color: var(--text-faint);
}

/* ════════════════════════════════════════════════════════════
   FOCUS MODE
   ════════════════════════════════════════════════════════════ */

body.focus-mode #ribbon,
body.focus-mode #sidebar,
body.focus-mode #tab-bar,
body.focus-mode #breadcrumb-bar,
body.focus-mode #status-bar,
body.focus-mode #backlinks-panel {
  display: none !important;
}

body.focus-mode #editor,
body.focus-mode .editor-textarea {
  max-width: 680px;
  padding-top: var(--space-16);
  padding-bottom: var(--space-16);
}

/* Cinematic vignette */
body.focus-mode::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(ellipse at center, transparent 60%, rgba(0,0,0,0.15) 100%);
  z-index: var(--z-overlay);
}

/* ════════════════════════════════════════════════════════════
   HYPERMARK EDITOR (Block-based)
   ════════════════════════════════════════════════════════════ */

.hypermark-editor {
  max-width: var(--max-content-width);
  margin: 0 auto;
  padding: var(--space-8) var(--space-6);
  min-height: 100%;
}

.hypermark-block {
  position: relative;
  margin-bottom: var(--space-1);
  border-radius: var(--radius-md);
  transition: background var(--transition-fast);
}

.hypermark-block:hover {
  background: var(--accent-surface);
}

.hypermark-block.focused {
  background: rgba(127, 109, 242, 0.05);
  box-shadow: inset 2px 0 0 var(--accent);
}

/* Block handle (drag grip) */
.block-handle {
  position: absolute;
  left: -28px;
  top: 50%;
  transform: translateY(-50%);
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-faint);
  cursor: grab;
  border-radius: var(--radius-sm);
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.hypermark-block:hover .block-handle { opacity: 1; }
.block-handle:hover { background: var(--bg-hover); color: var(--text-muted); }
.block-handle:active { cursor: grabbing; }

/* Block drop zone */
.block-drop-zone {
  height: 3px;
  margin: -2px 0;
  border-radius: var(--radius-full);
  transition: all var(--transition-fast);
}
.block-drop-zone.active {
  background: var(--accent);
  box-shadow: var(--shadow-glow);
  height: 3px;
}

/* Block types */
.hypermark-block.rendered {
  padding: var(--space-1) var(--space-2);
}

.hypermark-block textarea,
.hypermark-block .block-input {
  width: 100%;
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-family: var(--font-editor);
  font-size: 15px;
  line-height: var(--leading-relaxed);
  resize: none;
  outline: none;
  padding: var(--space-1) var(--space-2);
}

/* Heading blocks */
.hypermark-block.heading-1 .block-input,
.hypermark-block.heading-1.rendered { font-size: var(--text-3xl); font-weight: var(--weight-bold); font-family: var(--font-heading); }
.hypermark-block.heading-2 .block-input,
.hypermark-block.heading-2.rendered { font-size: var(--text-2xl); font-weight: var(--weight-semibold); font-family: var(--font-heading); }
.hypermark-block.heading-3 .block-input,
.hypermark-block.heading-3.rendered { font-size: var(--text-xl); font-weight: var(--weight-semibold); font-family: var(--font-heading); }

/* Code blocks */
.hypermark-block.code-block .block-input,
.hypermark-block.code-block.rendered pre {
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  background: var(--bg-code);
  border-radius: var(--radius-md);
  padding: var(--space-3);
}

/* Blockquote */
.hypermark-block.blockquote {
  border-left: 3px solid var(--accent);
  padding-left: var(--space-4);
  margin-left: var(--space-2);
}

/* Callout blocks */
.hypermark-block.callout {
  background: var(--accent-surface);
  border-left: 3px solid var(--accent);
  border-radius: 0 var(--radius-md) var(--radius-md) 0;
  padding: var(--space-3) var(--space-4);
}

/* Selection highlight */
.hypermark-block.selected {
  background: var(--bg-selection);
  border-radius: var(--radius-md);
}

/* Ghost line (AI autocomplete) */
.ghost-line {
  color: var(--text-faint);
  font-style: italic;
  pointer-events: none;
  user-select: none;
  opacity: 0.6;
}

/* Empty editor placeholder */
.hypermark-editor.empty::before {
  content: attr(data-placeholder);
  color: var(--text-faint);
  font-style: italic;
  pointer-events: none;
  position: absolute;
}

/* ─── Slash Command Menu ──────────────────────────────────── */
.slash-menu {
  position: absolute;
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  padding: var(--space-1);
  min-width: 240px;
  max-height: 320px;
  overflow-y: auto;
  box-shadow: var(--shadow-lg);
  z-index: var(--z-popover);
  animation: slide-up 100ms var(--ease-out);
  backdrop-filter: blur(var(--glass-blur));
}

.slash-menu-item {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background var(--transition-fast);
  color: var(--text-secondary);
}

.slash-menu-item:hover,
.slash-menu-item.selected {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.slash-menu-item-icon {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-surface);
  border-radius: var(--radius-md);
  color: var(--accent);
  font-size: var(--text-lg);
  flex-shrink: 0;
}

.slash-menu-item-info { flex: 1; }
.slash-menu-item-title { font-weight: var(--weight-medium); font-size: var(--text-base); }
.slash-menu-item-desc { font-size: var(--text-xs); color: var(--text-muted); }

/* ════════════════════════════════════════════════════════════
   GRAPH VIEW
   ════════════════════════════════════════════════════════════ */

.graph-container {
  position: relative;
  width: 100%;
  height: 100%;
  background: var(--bg-primary);
  overflow: hidden;
}

.graph-container canvas {
  width: 100%;
  height: 100%;
}

/* Graph node glow (applied via JS to node elements) */
.graph-node {
  filter: drop-shadow(0 0 6px var(--accent-glow));
  transition: filter var(--transition-fast);
}
.graph-node:hover {
  filter: drop-shadow(0 0 14px var(--accent-glow));
}

.graph-node-label {
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  fill: var(--text-secondary);
  pointer-events: none;
}

.graph-controls {
  position: absolute;
  bottom: var(--space-4);
  right: var(--space-4);
  display: flex;
  gap: var(--space-1);
}

.graph-control-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  cursor: pointer;
  backdrop-filter: blur(var(--glass-blur));
  transition: all var(--transition-fast);
}
.graph-control-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* ════════════════════════════════════════════════════════════
   CANVAS
   ════════════════════════════════════════════════════════════ */

.canvas-container {
  position: relative;
  width: 100%;
  height: 100%;
  background: var(--bg-primary);
  overflow: hidden;
}

.canvas-grid {
  background-image:
    radial-gradient(circle, var(--border-color) 1px, transparent 1px);
  background-size: 24px 24px;
}

.canvas-node {
  position: absolute;
  background: var(--bg-surface);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--space-3);
  box-shadow: var(--shadow-sm);
  transition: box-shadow var(--transition-fast);
  cursor: move;
}
.canvas-node:hover {
  box-shadow: var(--shadow-md);
}
.canvas-node.selected {
  border-color: var(--accent);
  box-shadow: 0 0 0 1px var(--accent), var(--shadow-glow);
}

/* ════════════════════════════════════════════════════════════
   OBSIDIAN API COMPATIBILITY
   ════════════════════════════════════════════════════════════ */

/* Obsidian Notice */
.obsidian-notice {
  position: fixed;
  bottom: var(--space-4);
  right: var(--space-4);
  background: var(--bg-surface-raised);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  padding: var(--space-3) var(--space-5);
  color: var(--text-primary);
  font-size: var(--text-md);
  box-shadow: var(--shadow-lg);
  z-index: var(--z-toast);
  animation: slide-in-right var(--duration-smooth) var(--ease-out);
  max-width: 360px;
}

/* Obsidian Modal */
.obsidian-modal-container {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.55);
  backdrop-filter: blur(6px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-modal);
}

.obsidian-modal {
  background: var(--bg-modal);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-xl);
  padding: var(--space-6);
  min-width: 360px;
  max-width: 680px;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: var(--shadow-xl);
  animation: slide-up var(--duration-smooth) var(--ease-out);
}

.obsidian-modal .modal-close-button {
  position: absolute;
  top: var(--space-3);
  right: var(--space-3);
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: var(--space-1);
  border-radius: var(--radius-sm);
  transition: all var(--transition-fast);
}
.obsidian-modal .modal-close-button:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.obsidian-modal-title {
  font-family: var(--font-heading);
  font-size: var(--text-xl);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  margin-bottom: var(--space-4);
}

/* Obsidian Menu */
.obsidian-menu {
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  padding: var(--space-1);
  min-width: 180px;
  box-shadow: var(--shadow-lg);
  z-index: var(--z-popover);
  animation: ctx-enter 100ms var(--ease-out);
}

.obsidian-menu-item {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-1_5) var(--space-3);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  font-size: var(--text-base);
  cursor: pointer;
  transition: all var(--transition-fast);
}
.obsidian-menu-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.obsidian-menu-separator {
  height: 1px;
  background: var(--border-color);
  margin: var(--space-1) var(--space-2);
}

/* Obsidian Setting Item */
.obsidian-setting-item {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: var(--space-6);
  padding: var(--space-3) 0;
  border-bottom: 1px solid var(--border-light);
}

.obsidian-setting-item-info { flex: 1; }
.obsidian-setting-item-name {
  font-weight: var(--weight-medium);
  color: var(--text-primary);
  font-size: var(--text-md);
}
.obsidian-setting-item-description {
  color: var(--text-muted);
  font-size: var(--text-sm);
  line-height: var(--leading-snug);
  margin-top: var(--space-0_5);
}
.obsidian-setting-item-control {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

/* Obsidian Buttons */
.obsidian-button {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-1_5) var(--space-4);
  border-radius: var(--radius-md);
  font-size: var(--text-base);
  font-weight: var(--weight-medium);
  cursor: pointer;
  transition: all var(--transition-normal);
  border: 1px solid var(--border-color);
  background: var(--bg-button);
  color: var(--text-primary);
}
.obsidian-button:hover {
  background: var(--bg-button-hover);
}
.obsidian-button-cta {
  background: var(--accent);
  color: var(--text-on-accent);
  border-color: transparent;
}
.obsidian-button-cta:hover {
  background: var(--accent-light);
  box-shadow: var(--shadow-glow);
}

/* Obsidian Text Input */
.obsidian-text-input {
  padding: var(--space-1_5) var(--space-3);
  background: var(--bg-input);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--text-md);
  outline: none;
  transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
}
.obsidian-text-input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-surface);
}

/* Obsidian Toggle */
.checkbox-container {
  position: relative;
  width: 40px;
  height: 22px;
  background: var(--bg-active);
  border-radius: var(--radius-full);
  cursor: pointer;
  transition: background var(--transition-normal);
}
.checkbox-container::after {
  content: '';
  position: absolute;
  top: 3px;
  left: 3px;
  width: 16px;
  height: 16px;
  background: var(--text-secondary);
  border-radius: var(--radius-full);
  transition: all var(--transition-spring);
}
.checkbox-container.is-enabled {
  background: var(--accent);
}
.checkbox-container.is-enabled::after {
  left: 21px;
  background: var(--text-on-accent);
}

/* Obsidian Dropdown */
.obsidian-dropdown {
  padding: var(--space-1_5) var(--space-8) var(--space-1_5) var(--space-3);
  background: var(--bg-input);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--text-base);
  appearance: none;
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%236c7086' stroke-width='2'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
  background-size: 16px;
  background-position: right 8px center;
  background-repeat: no-repeat;
}

/* Plugin items in settings */
.plugin-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-3) var(--space-4);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  margin-bottom: var(--space-2);
  transition: all var(--transition-fast);
}
.plugin-item:hover {
  border-color: var(--border-hover);
  background: var(--bg-hover);
}

/* ════════════════════════════════════════════════════════════
   PASSWORD DIALOG
   ════════════════════════════════════════════════════════════ */

.password-dialog-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-modal);
}

/* ════════════════════════════════════════════════════════════
   READING TIME
   ════════════════════════════════════════════════════════════ */

.reading-time {
  font-size: var(--text-xs);
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

/* ════════════════════════════════════════════════════════════
   SPLIT PANE TAB BAR
   ════════════════════════════════════════════════════════════ */

.split-tab-bar {
  height: var(--tab-height);
  min-height: var(--tab-height);
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border-color);
  display: flex;
  align-items: flex-end;
  overflow-x: auto;
}
.split-tab-bar::-webkit-scrollbar { height: 0; }

/* ════════════════════════════════════════════════════════════
   LOADING STATES
   ════════════════════════════════════════════════════════════ */

.skeleton {
  background: linear-gradient(90deg,
    var(--bg-surface) 25%,
    var(--bg-surface-raised) 37%,
    var(--bg-surface) 63%
  );
  background-size: 400px 100%;
  animation: skeleton-pulse 1.4s ease infinite;
  border-radius: var(--radius-md);
}

.spinner {
  width: 20px;
  height: 20px;
  border: 2px solid var(--bg-active);
  border-top-color: var(--accent);
  border-radius: var(--radius-full);
  animation: spin 0.6s linear infinite;
}

/* ════════════════════════════════════════════════════════════
   STATUS INDICATORS
   ════════════════════════════════════════════════════════════ */

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: var(--radius-full);
  flex-shrink: 0;
}
.status-dot.online { background: var(--text-green); box-shadow: 0 0 6px rgba(166, 227, 161, 0.4); }
.status-dot.offline { background: var(--text-red); }
.status-dot.syncing { background: var(--text-yellow); animation: pulse-glow 1.5s ease infinite; }

/* ════════════════════════════════════════════════════════════
   RENAME INPUT (inline file rename)
   ════════════════════════════════════════════════════════════ */

.rename-input {
  background: var(--bg-input);
  border: 1px solid var(--accent);
  border-radius: var(--radius-sm);
  color: var(--text-primary);
  font-size: var(--text-base);
  padding: var(--space-0_5) var(--space-2);
  outline: none;
  width: 100%;
  box-shadow: 0 0 0 2px var(--accent-surface);
}

/* ════════════════════════════════════════════════════════════
   ACCESSIBILITY: FOCUS INDICATORS
   ════════════════════════════════════════════════════════════ */

:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
[tabindex]:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* Remove outline for mouse clicks */
:focus:not(:focus-visible) {
  outline: none;
}

/* ════════════════════════════════════════════════════════════
   RESPONSIVE
   ════════════════════════════════════════════════════════════ */

@media (max-width: 768px) {
  #ribbon { width: 36px; min-width: 36px; }
  .ribbon-btn { width: 28px; height: 28px; }

  #sidebar {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    z-index: var(--z-overlay);
    transform: translateX(-100%);
    transition: transform var(--transition-smooth);
    box-shadow: var(--shadow-xl);
  }
  #sidebar.mobile-open {
    transform: translateX(0);
  }

  .tab { padding: 0 var(--space-2); min-width: 60px; }

  .command-palette { width: 95vw; }

  #editor, .editor-textarea {
    padding: var(--space-4);
  }

  .preview-content, .reading-view {
    padding: var(--space-4);
  }

  .settings-container { flex-direction: column; }
  .settings-nav {
    width: 100%;
    min-width: 100%;
    flex-direction: row;
    overflow-x: auto;
    border-right: none;
    border-bottom: 1px solid var(--border-color);
  }
}

@media (max-width: 480px) {
  #ribbon { display: none; }
  .dialog, .modal, .modal-content {
    min-width: 0;
    width: 95%;
    padding: var(--space-4);
  }
}

/* ════════════════════════════════════════════════════════════
   REDUCED MOTION
   ════════════════════════════════════════════════════════════ */

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ════════════════════════════════════════════════════════════
   PRINT
   ════════════════════════════════════════════════════════════ */

@media print {
  #ribbon, #sidebar, #tab-bar, #breadcrumb-bar, #status-bar,
  #backlinks-panel, .resize-handle {
    display: none !important;
  }

  body, #app, #main-layout, #content-area, #editor-area, #pane-container, .pane {
    display: block !important;
    height: auto !important;
    overflow: visible !important;
  }

  .preview-content, .reading-view {
    max-width: 100%;
    padding: 0;
  }
}

/* ════════════════════════════════════════════════════════════
   UTILITY CLASSES
   ════════════════════════════════════════════════════════════ */

.hidden { display: none !important; }
.invisible { visibility: hidden; }
.truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.flex { display: flex; }
.flex-col { display: flex; flex-direction: column; }
.flex-1 { flex: 1; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.gap-1 { gap: var(--space-1); }
.gap-2 { gap: var(--space-2); }
.gap-3 { gap: var(--space-3); }
.gap-4 { gap: var(--space-4); }
.text-muted { color: var(--text-muted); }
.text-accent { color: var(--accent); }
.font-mono { font-family: var(--font-mono); }
.font-heading { font-family: var(--font-heading); }

/* Fade-in observer */
.fade-in {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.6s var(--ease-out), transform 0.6s var(--ease-out);
}
.fade-in.visible {
  opacity: 1;
  transform: translateY(0);
}

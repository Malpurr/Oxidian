# Deep Test Report: Sidebar Panels â€” Oxidian v2.2.0
**Datum:** 2026-02-10  
**Tester:** Automated Code + Screenshot Analysis  
**Scope:** Alle 9 Sidebar Panels + Ribbon Navigation

---

## Zusammenfassung

| Panel | Status | Kritische Issues |
|-------|--------|-----------------|
| Explorer | âœ… Funktional | 1 minor |
| Search | âœ… Funktional | 1 minor |
| Bookmarks | âš ï¸ Dual-System | 1 medium |
| Outline | âœ… Funktional | 0 |
| Recent Files | âœ… Funktional | 0 |
| Remember | âœ… Umfangreich | 1 minor |
| Tags | âœ… Funktional | 1 minor |
| Graph | âœ… Funktional | 1 medium |
| Canvas | âœ… Funktional | 1 minor |

**Gesamt: 0 kritisch, 2 medium, 5 minor**

---

## 1. Panel-Wechsel (switchSidebarPanel)

### Mechanismus
- `switchSidebarPanel(name)` in `app.js:~L1410` â€” entfernt `.active` von allen `.sidebar-panel`, setzt auf `#panel-{name}`
- Ribbon-Buttons: `data-panel="..."` klick-Handler aktualisiert `.active` Klasse auf Ribbon-Buttons
- Graph + Canvas: Sonderfall â€” `data-action` statt `data-panel`, Ã¶ffnet als Tab im Main Content

### Befund
âœ… **Panel-Wechsel funktioniert korrekt** â€” jeder Ribbon-Button hat korrektes `data-panel` Attribut  
âœ… **Active-State** wird korrekt gesetzt (Ribbon + Panel synchron)  
âœ… **Screenshots bestÃ¤tigen:** Panels wechseln visuell korrekt (13-search, 14-bookmarks, 15-outline, 16-recent, 18-explorer)

### Issue
âš ï¸ **MINOR:** Beim Wechsel zu "Outline" wird `updateOutline()` nur ausgefÃ¼hrt wenn `editor.textarea` existiert â€” im HyperMark-Modus wird stattdessen auf `hypermarkEditor.getBlocks()` zugegriffen, aber der Refresh-Trigger prÃ¼ft nur `this.editor?.textarea`

---

## 2. Explorer Panel

### HTML: `#panel-explorer`
- Header: "EXPLORER" + 3 Action-Buttons (New Note, New Folder, Refresh)
- `#file-tree` â€” dynamisch gerendert von `Sidebar.render()`
- `#tags-section` mit `#tags-list` â€” Tags als Pills unter dem File Tree

### Code-Analyse (sidebar.js)
- **File Tree laden:** `refresh()` â†’ `invoke('scan_vault')` â†’ `render(tree.children)` âœ…
- **Ordner erstellen:** `createFolder(path)` â†’ `invoke('create_folder')` + refresh âœ…
- **Dateien anzeigen:** `createFileNode()` mit Icon-Detection (daily notes, images, PDF, config, canvas) âœ…
- **Drag & Drop:** `DragDrop` Modul via `initFileExplorerDragDrop()` in app.js âœ…
- **Rename:** `startRename()` in app.js â€” inline-Input, Enter/Escape handling, auto-updates tabs/bookmarks/recent/navHistory âœ…
- **Delete:** `deleteFile()` mit confirm()-Dialog â†’ `invoke('delete_note')` âœ…
- **Context Menu:** `contextmenu` Event auf Folder + File Items â†’ `app.contextMenu.showFileMenu()` âœ…
- **Move Entry:** `moveEntry(oldPath, newPath)` â†’ `invoke('move_entry')` âœ…

### Screenshot 18-explorer.png
- Zeigt "Vault is empty" Fallback korrekt
- TAGS Section sichtbar am unteren Rand
- 3 Action-Buttons in Header vorhanden

### Issue
âš ï¸ **MINOR:** `setActive(path)` ruft bei Parent-Folder-Expand `this.refresh()` auf â€” bei groÃŸen Vaults kÃ¶nnte das ein volles Re-Render auslÃ¶sen statt nur die betroffenen Folder zu Ã¶ffnen

---

## 3. Search Panel

### HTML: `#panel-search`
- Header: "SEARCH"
- Input: `#search-input` mit placeholder
- Results: `#search-results`

### Code-Analyse (search.js)
- **Global Search:** `performSearch(query)` â†’ `invoke('search_vault', { query })` âœ…
- **Tag-Search:** Query mit `#` Prefix â†’ `invoke('search_by_tag', { tag })` âœ…
- **Debounce:** 200ms timeout âœ…
- **Min-Length:** 2 Zeichen fÃ¼r Search, 1 Zeichen fÃ¼r Suggestions âœ…
- **Fuzzy Search:** `performFuzzySearch()` vorhanden aber nicht im Standard-Flow âœ…
- **Suggestions:** `showSuggestions()` â†’ `invoke('search_suggest')` âœ…
- **Keyboard:** Enter â†’ erster Result klick, Escape â†’ clear âœ…
- **Error Handling:** Fallback-Rendering bei Fehlern âœ…

### Fehlende Features
- âŒ **Regex-Search:** Kein Regex-Toggle im UI oder Code
- âŒ **Replace:** Kein Search & Replace im globalen Search (nur in-file via FindReplace Modul)
- âŒ **Result-Navigation:** Kein Prev/Next Result-Button

### Screenshot 13-search.png
- Search-Panel mit Input sichtbar âœ…
- Panel-Wechsel funktioniert âœ…

### Issue
âš ï¸ **MINOR:** Keine Regex- oder Replace-Funktion im globalen Search. In-file Find/Replace existiert separat (`find-replace.js`), aber nicht im Sidebar Search Panel.

---

## 4. Bookmarks Panel

### HTML: `#panel-bookmarks`
- Header: "BOOKMARKS" + Add-Button (`#btn-bookmark-current`)
- `#bookmarks-list` â€” initial "No bookmarks yet"

### Code-Analyse
**âš ï¸ DUAL-SYSTEM DETECTED:**

1. **app.js (localStorage):** `this.bookmarks = JSON.parse(localStorage.getItem('oxidian-bookmarks'))` â€” einfaches Array von Paths, `toggleBookmark()`, `renderBookmarks()`
2. **bookmarks.js (Rust Backend):** `BookmarksManager` mit `invoke('list_bookmarks')`, `invoke('add_bookmark')`, `invoke('remove_bookmark')`, `invoke('reorder_bookmarks')`

Beide Systeme existieren parallel:
- `app.toggleBookmark()` â†’ localStorage
- `app.bookmarksManagerModule.toggleBookmark()` â†’ Rust backend
- `renderBookmarks()` in app.js liest nur aus `this.bookmarks` (localStorage)
- `BookmarksManager._initStarButton()` beobachtet breadcrumb fÃ¼r Star-State â€” nutzt aber Rust Backend

### FunktionalitÃ¤t
- **HinzufÃ¼gen:** `btn-bookmark-current` â†’ `app.toggleBookmark()` (localStorage) âœ…
- **Entfernen:** Ã—-Button pro Bookmark â†’ `toggleBookmark(path)` âœ…
- **Click Ã¶ffnet Note:** `.name` click â†’ `app.openFile(path)` âœ…
- **Sortieren:** Keine UI dafÃ¼r, aber `reorderBookmarks()` existiert im Backend
- **Context-Menu Integration:** BookmarksManager injiziert "Add to Bookmarks" ins File-Tree Context Menu âœ…

### Screenshot 14-bookmarks.png
- Bookmarks-Panel sichtbar, Ribbon aktiv âœ…
- Search-Input noch sichtbar (Panel-Content korrekt gewechselt)

### Issue
âš ï¸ **MEDIUM:** Dual-Bookmark-System â€” localStorage (`app.bookmarks`) und Rust Backend (`BookmarksManager`) sind nicht synchronisiert. `renderBookmarks()` liest nur localStorage. Wenn User Ã¼ber Context-Menu (Rust) bookmarked, erscheint es nicht im Panel. Empfehlung: Eines der Systeme entfernen und vereinheitlichen.

---

## 5. Outline Panel

### HTML: `#panel-outline`
- Header: "OUTLINE"
- `#outline-list` â€” initial "Open a note to see its outline"

### Code-Analyse (app.js: updateOutline)
- **Heading-Parsing:** Regex `^(#{1,6})\s+(.+)` auf Content-Lines âœ…
- **Hierarchy:** `paddingLeft = (level - 1) * 16 + 12` px â€” korrekte visuelle Verschachtelung âœ…
- **H-Level Badge:** `<span class="outline-h-level">H${h.level}</span>` âœ…
- **Click â†’ Scroll:** 
  - Classic Mode: Setzt `textarea.selectionStart` + `scrollTop` Berechnung âœ…
  - HyperMark Mode: `hypermarkEditor.focusBlock()` + `scrollToBlock()` âœ…
- **Auto-Refresh:** Bei Panel-Wechsel zu "outline" wird `updateOutline()` aufgerufen âœ…
- **Empty State:** "No headings found" wenn keine Headings âœ…

### Screenshot 15-outline.png
- Zeigt "H1 My First Note" korrekt âœ…
- Korrekte Hierarchie-Darstellung âœ…

### Issue
Keine Issues.

---

## 6. Recent Files Panel

### HTML: `#panel-recent`
- Header: "RECENT FILES" + Clear-Button (`#btn-clear-recent`)
- `#recent-list` â€” initial "No recent files"

### Code-Analyse (app.js)
- **Auflistung:** `renderRecentFiles()` â†’ iteriert `this.recentFiles` (localStorage) âœ…
- **HinzufÃ¼gen:** `addRecentFile(path)` â€” dedupliziert, max 20, unshift âœ…
- **Click Ã¶ffnet:** `item.addEventListener('click', () => this.openFile(path))` âœ…
- **Clear:** `btn-clear-recent` â†’ leert Array + localStorage + re-render âœ…
- **Folder-Anzeige:** Zeigt Subfolder-Pfad als `recent-folder` span âœ…
- **Persistence:** localStorage `oxidian-recent` âœ…
- **Auto-Update bei Rename:** `startRename()` aktualisiert `recentFiles` Array âœ…
- **Skips special paths:** `path.startsWith('__')` wird ignoriert âœ…

### Screenshot 16-recent.png
- Panel korrekt angezeigt (Outline-Content noch sichtbar â€” Screenshot zeigt richtigen Panel-Wechsel Moment)

### Issue
Keine Issues.

---

## 7. Remember Panel (komplett)

### HTML: `#panel-remember`
- Header: "ğŸ§  REMEMBER"
- `#remember-dashboard` â€” Container fÃ¼r dynamischen Content

### Architektur
**Lazy-Loading:** Remember wird erst beim Klick auf den Ribbon-Button initialisiert (`initRemember()`) â€” spart ~100+ IPC-Calls beim Startup âœ…

**Module:**
| Modul | Datei | Zeilen | Status |
|-------|-------|--------|--------|
| Remember (Core) | remember.js | 198 | âœ… |
| Dashboard | remember-dashboard.js | 441 | âœ… |
| Sources | remember-sources.js | 275 | âœ… |
| Cards | remember-cards.js | 282 | âœ… |
| Review | remember-review.js | 288 | âœ… |
| Stats | remember-stats.js | 160 | âœ… |
| Connections | remember-connections.js | 225 | âœ… |
| Extract | remember-extract.js | 375 | âœ… |
| Import | remember-import.js | 348 | âœ… |

### 7a. Dashboard (`RememberDashboard`)
- **Due-Count:** `invoke('remember_get_due_cards')` â†’ Anzeige "Heute fÃ¤llig: X Karten" âœ…
- **Start Review Button:** Disabled wenn 0 due, Pulse-Animation wenn >0 âœ…
- **Highlight of the Day:** Random Card aus `remember.getCards()`, "Show another" Button âœ…
- **Recent Activity:** Merged timeline aus Cards + Sources, sortiert nach Datum âœ…
- **Stats Overview:** 4-Grid (Karten, Quellen, Reviews heute, Retention) âœ…
- **Mini-Heatmap:** 28 Tage, 5 Stufen (0-4) âœ…
- **Top Tags:** Badge-Style, klickbar â†’ `searchByTag()` âœ…
- **Active Sources:** Filter auf `status === 'reading'` âœ…
- **Onboarding:** Wenn keine Cards/Sources â†’ 3-Step-Guide + CTA âœ…
- **Streak:** ğŸ”¥ Streak-Counter vom Backend âœ…

### 7b. Sources (`RememberSources`)
- **CRUD:** `invoke('remember_create_source')`, `invoke('remember_delete_source')` âœ…
- **Types:** Book ğŸ“–, Article ğŸ“„, Video ğŸ¬, Podcast ğŸ™ï¸ âœ…
- **Status:** Want to Read ğŸ“‹, Reading ğŸ“–, Finished âœ… âœ…
- **Rating:** 1-5 Stars mit interaktivem Picker âœ…
- **Filter:** All / per Type âœ…
- **Grouped by Status:** Korrekte Sortierung (reading â†’ want_to_read â†’ finished) âœ…
- **Form:** Modal mit Title, Author, Type, Status, Rating, Notes âœ…
- **Edit/Delete/Open:** Buttons pro Source-Card âœ…

### 7c. Cards (`RememberCards`)
- **CRUD:** `invoke('remember_create_card')`, `invoke('remember_delete_card')` âœ…
- **Card Creator:** Modal mit Front, Back, Source (Dropdown + Custom), Tags (comma-sep) âœ…
- **Extract to Card:** `extractToCard()` â€” Nimmt Editor-Selection als "Back", current file als Source âœ…
- **Card Browser:** Filter by Tag + Source, Edit/Delete Buttons âœ…

### 7d. Review (`startReviewSession`)
- **SM-2 Algorithmus:** Im Rust Backend, JS zeigt nur UI âœ…
- **Progress Bar:** Karte X/Y mit Prozent-Anzeige âœ…
- **Front/Back Flip:** "Antwort zeigen" â†’ Back aufdecken âœ…
- **Rating Buttons:** Again (rot) / Hard (orange) / Good (grÃ¼n) / Easy (blau) âœ…
- **Keyboard Shortcuts:** Space/Enter fÃ¼r Flip, 1-4 fÃ¼r Rating âœ…
- **Quality Options:** Versucht zuerst `invoke('remember_quality_options')`, Fallback hardcoded âœ…
- **Summary:** ğŸ‰ Screen mit Breakdown nach Rating âœ…
- **Restore:** Stellt original Content-Area nach Close wieder her âœ…
- **CSS Injection:** Eigenes Stylesheet `remember-review-styles` âœ…

### 7e. Stats (`RememberStats`)
- **Data:** `invoke('remember_get_stats')`, `invoke('remember_get_heatmap')` âœ…
- **Streak:** Flame + Number âœ…
- **Grid:** 8 Stats (Total Cards, Total Reviews, Due Today, Avg Ease, Mature, Young, Current/Best Streak) âœ…
- **Bar Chart:** Last 30 days, relative HÃ¶he âœ…
- **Heatmap:** 7-Reihen Grid (Wochentage), auto-flow column âœ…

### 7f. Connections (`SmartConnections`)
- **Related Cards:** `invoke('remember_find_related')` mit Score âœ…
- **Auto-Link Suggestions:** `invoke('remember_find_auto_links')` + Insert-Button âœ…
- **Cross-Source:** `invoke('remember_cross_source')` âœ…
- **Stats Widget:** Most connected, Orphans âœ…
- **Connection Stats:** `invoke('remember_connection_stats')` âœ…

### 7g. Extract (`RememberExtract`)
- **Selection-basiert:** Editor-Selection â†’ Extract Dialog âœ…
- **Dialog:** Front, Back, Source (auto-filled), Tags (mit Autocomplete aus `invoke('get_tags')`) âœ…
- **Keyboard:** Ctrl+Shift+E âœ…
- **Context Menu:** Patcht Editor-Context-Menu mit "Extract to Card" âœ…
- **Bulk Extract:** Findet alle Blockquotes (`>`) â†’ Checkbox-Selection â†’ Sequential Dialog âœ…
- **Highlight Marker:** FÃ¼gt `<!-- extracted -->` Kommentar hinzu âœ…

### 7h. Import (`RememberImport`)
- **Formate:** Kindle (My Clippings.txt), Readwise CSV, Markdown, Plain Text âœ…
- **Drag & Drop:** Dropzone mit File-API âœ…
- **File Picker:** Tauri Dialog API âœ…
- **Parse:** `invoke('remember_import_parse')` âœ…
- **Preview:** Grouped by Source, Checkbox-Selection, Select All/None âœ…
- **Execute:** `invoke('remember_import_execute')` â†’ Ergebnis mit Created-Counts âœ…

### Issue
âš ï¸ **MINOR:** `RememberDashboard.show()` ersetzt den gesamten `#pane-container` Content (Left Pane) â€” das ist korrekt fÃ¼r Full-Screen Dashboard, aber der Sidebar-Panel `#remember-dashboard` wird auch per `remember.refreshDashboard()` befÃ¼llt. Zwei Rendering-Pfade fÃ¼r dasselbe Panel kÃ¶nnen divergieren.

---

## 8. Tags

### HTML
- Tags sind **kein eigenes Ribbon-Panel** sondern im Explorer-Panel eingebettet: `#tags-section` innerhalb `#panel-explorer`
- `#tags-list` â€” dynamisch befÃ¼llt

### Code-Analyse (app.js: loadTags)
- **Laden:** `invoke('get_tags')` â†’ forEach tag â†’ `<span class="tag-pill">#${tag}</span>` âœ…
- **Click â†’ Filter:** `pill.addEventListener('click', () => this.searchByTag(tag))` â†’ wechselt zu Search Panel, setzt Query, fÃ¼hrt Search aus âœ…
- **Refresh nach Unlock:** `app.loadTags()` wird nach Vault-Unlock aufgerufen âœ…

### Screenshot 18-explorer.png
- "TAGS" Header am unteren Rand sichtbar âœ…

### Issue
âš ï¸ **MINOR:** Tags haben keinen eigenen Ribbon-Button/Panel â€” sie sind im Explorer eingebettet und scrollen mÃ¶glicherweise bei langen File-Trees aus dem Sichtfeld. Kein separater Zugang.

---

## 9. Graph View

### Ribbon-Button
- `data-action="graph"` (nicht `data-panel`) â†’ Ã¶ffnet als Tab im Main Content

### Code-Analyse (graph.js)
- **Canvas-basiert:** HTML5 Canvas mit 2D Context âœ…
- **Layout:** Rust Backend `invoke('compute_graph', { vaultPath, filter })` â€” Fruchterman-Reingold pre-computed âœ…
- **Rendering:** Edges (halbtransparent) â†’ Nodes (Kreise) â†’ Labels âœ…
- **Zoom:** Mousewheel, Factor 0.92/1.08, Limits 0.2-4x âœ…
- **Pan:** Mousedown auf leere FlÃ¤che â†’ Drag âœ…
- **Node Drag:** Mousedown auf Node â†’ Drag zum Repositionieren âœ…
- **Hover:** Node-Highlight + Lighten-Effect + Cursor âœ…
- **DblClick â†’ Open:** `app.openFile(node.id)` âœ…
- **ResizeObserver:** Reagiert auf Container-Resize âœ…
- **Destroy:** Cleanup von AnimationFrame + ResizeObserver âœ…

### Screenshot 17-graph-view.png
- Graph View Tab Ã¶ffnet sich korrekt âœ…
- Canvas sichtbar (leer weil Vault fast leer) âœ…
- Sidebar bleibt aktiv (Outline Panel) âœ…

### Issue
âš ï¸ **MEDIUM:** Graph-Button wechselt **nicht** das Sidebar-Panel (es Ã¶ffnet nur einen Tab). Kein Sidebar-Panel fÃ¼r Graph-Filter/Einstellungen. Das Outline-Panel bleibt aktiv im Screenshot, obwohl Graph View offen ist â€” kÃ¶nnte User verwirren.

---

## 10. Canvas View

### Ribbon-Button
- `data-action="canvas"` â†’ Ã¶ffnet als Tab im Main Content

### Code-Analyse (canvas.js â€” 670 Zeilen)
- **Node-Typen:** Note Card, Text Box, Group âœ…
- **CRUD via Rust:** `invoke('canvas_add_node')`, `invoke('canvas_move_node')`, `invoke('canvas_delete_node')`, `invoke('canvas_add_edge')` âœ…
- **Drag & Drop:** Mousedown/Move/Up mit Offset-Berechnung âœ…
- **Touch Support:** Touch Events (passive: false) âœ…
- **Connections:** Bezier-Curves mit Arrows, Connection-Preview wÃ¤hrend Drag âœ…
- **Toolbar:** Add Note, Add Text, Add Group, Zoom In/Out, Fit to Screen, Save âœ…
- **Grid:** 20px Grid-Lines als Background âœ…
- **Viewport:** Pan + Zoom (0.1 - 3x) âœ…
- **Minimap:** Canvas-Element vorhanden (200x150) âœ…
- **Delete:** Button pro Node + Delete-Key fÃ¼r Selected Node âœ…
- **Persist:** `saveCanvas()` â†’ `invoke('save_canvas', { path, data })` âœ…
- **Load:** `loadCanvas(path)` â†’ `invoke('load_canvas', { path })` âœ…
- **DblClick auf Canvas:** Erstellt neuen Note Card âœ…
- **Destroy:** Cleanup aller Event Listeners âœ…

### Issue
âš ï¸ **MINOR:** `startConnection()` setzt `isConnecting = true` und `connectionStart`, aber es gibt keinen "Complete Connection" Handler, der beim Drop auf einem Node eine `addConnection()` aufruft. Die `onCanvasMouseUp` setzt nur `isConnecting = false` ohne zu prÃ¼fen, ob Ã¼ber einem Ziel-Node. Connection-Erstellung funktioniert nur Ã¼ber den Connect-Button â†’ Connect-Modus, aber die Ziel-Erkennung fehlt.

---

## 11. Ribbon Navigation (GesamtÃ¼bersicht)

### Top-Bereich (Panels)
| Button | data-panel | Panel ID | Status |
|--------|-----------|----------|--------|
| File Explorer | `explorer` | `panel-explorer` | âœ… |
| Search | `search` | `panel-search` | âœ… |
| Bookmarks | `bookmarks` | `panel-bookmarks` | âœ… |
| Outline | `outline` | `panel-outline` | âœ… |
| Recent Files | `recent` | `panel-recent` | âœ… |
| Graph View | `data-action="graph"` | â€” (Tab) | âœ… |
| Remember | `remember` | `panel-remember` | âœ… |
| Canvas | `data-action="canvas"` | â€” (Tab) | âœ… |

### Bottom-Bereich (Actions)
| Button | Action | Status |
|--------|--------|--------|
| Random Note | `random` | âœ… |
| Daily Note | `daily` | âœ… |
| Focus Mode | `focus` | âœ… |
| Settings | `settings` | âœ… |

---

## 12. Empfehlungen (nach PrioritÃ¤t)

### Medium Priority
1. **Bookmark-System vereinheitlichen** â€” Entweder localStorage ODER Rust Backend nutzen, nicht beides. Rust Backend ist zukunftssicherer (sync-fÃ¤hig, server-side backup).
2. **Graph Panel-State** â€” Beim Ã–ffnen des Graph View entweder ein Sidebar-Panel fÃ¼r Graph-Optionen anzeigen oder den aktiven Panel-State reflektieren.

### Low Priority
3. **Search: Regex + Replace** â€” Optionaler Toggle fÃ¼r Regex-Search im globalen Search Panel
4. **Tags: Eigenes Panel** â€” Optional separates Tags-Panel oder zumindest sticky am Bottom des Explorers
5. **Canvas: Connection Drop-Target** â€” `onCanvasMouseUp` sollte prÃ¼fen ob ein Node unter dem Cursor ist und ggf. `addConnection()` aufrufen
6. **Outline: HyperMark Refresh** â€” `switchSidebarPanel('outline')` sollte auch im HyperMark-Modus korrekt refreshen
7. **Remember: Single Render-Path** â€” Dashboard in Sidebar vs Full-Screen unifizieren

---

## Screenshots-Analyse

| Screenshot | Inhalt | Befund |
|------------|--------|--------|
| 13-search-panel.png | Search Panel aktiv | âœ… Input sichtbar, Panel korrekt |
| 14-bookmarks.png | Bookmarks Panel | âœ… Ribbon aktiv, Panel leer (korrekt) |
| 15-outline.png | Outline mit H1 | âœ… "H1 My First Note" korrekt |
| 16-recent-files.png | Recent Files hover | âœ… Panel-Wechsel korrekt |
| 17-graph-view.png | Graph als Tab | âœ… Canvas gerendert, Tab sichtbar |
| 18-explorer.png | Explorer + Tags | âœ… "Vault is empty", Tags Section |

---

*Report generiert: 2026-02-10 23:40 CET*
